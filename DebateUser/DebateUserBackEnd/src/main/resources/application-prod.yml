# 프로덕션 환경 설정
spring:
  datasource:
    # 프로덕션 데이터베이스 설정은 환경 변수로 주입
    url: ${DB_URL:jdbc:mysql://localhost:3306/debate_db?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true}
    username: ${DB_USERNAME:debate_web}
    password: ${DB_PASSWORD:Qwer12#$}
    driver-class-name: com.mysql.cj.jdbc.Driver
    # 연결 타임아웃 설정 (밀리초)
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 5

  jpa:
    hibernate:
      ddl-auto: update  # 테이블 자동 생성 및 업데이트
    show-sql: false  # 프로덕션에서는 SQL 로그 비활성화
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

logging:
  level:
    root: INFO
    com.debate: INFO  # 프로덕션에서는 INFO 레벨만

# 프로덕션 환경용 Actuator 설정 (보안 강화)
management:
  endpoints:
    web:
      exposure:
        include: health,info  # health와 info만 노출
  endpoint:
    health:
      show-details: never  # 프로덕션에서는 상세 정보 비공개 (보안)
  info:
    env:
      enabled: false  # 프로덕션에서는 환경 정보 비활성화 (보안)

server:
  port: ${SERVER_PORT:9001}
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

# 파일 업로드 설정
file:
  upload-dir: ${FILE_UPLOAD_DIR:/home/ubuntu/opt/debate/files/editor/images}
  upload-url-prefix: /files/editor/images
  profile-upload-dir: ${FILE_PROFILE_UPLOAD_DIR:/home/ubuntu/opt/debate/files/user/profile}
  profile-upload-url-prefix: /files/user/profile

jwt:
  secret: ${JWT_SECRET:debate-secret-key-for-jwt-token-generation-please-change-in-production}
  expiration: ${JWT_EXPIRATION:86400000} # 24시간 (밀리초)

